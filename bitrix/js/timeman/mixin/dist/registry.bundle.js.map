{"version":3,"file":"registry.bundle.js","sources":["../src/time.js"],"sourcesContent":["export const Time = {\n\tcomputed:\n\t{\n\t\tfullTime()\n\t\t{\n\t\t\treturn this.workTime + this.personalTime;\n\t\t},\n\t\tworkTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getWorkingEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tpersonalTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getPersonalEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tformatSeconds(seconds)\n\t\t{\n\t\t\tif (seconds < 1)\n\t\t\t{\n\t\t\t\treturn 0 + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_MIXIN_TIME_MINUTES_SHORT');\n\t\t\t}\n\t\t\telse if (seconds < 60)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_MIXIN_TIME_LESS_THAN_MINUTE');\n\t\t\t}\n\n\t\t\tlet hours = Math.floor(seconds / 3600);\n\t\t\tlet minutes = Math.round(seconds / 60 % 60);\n\n\t\t\tif (minutes === 60)\n\t\t\t{\n\t\t\t\thours += 1;\n\t\t\t\tminutes = 0;\n\t\t\t}\n\n\t\t\tif (hours > 0)\n\t\t\t{\n\t\t\t\thours = hours + ' ' +  this.$Bitrix.Loc.getMessage('TIMEMAN_MIXIN_TIME_HOUR_SHORT');\n\n\t\t\t\tif (minutes > 0)\n\t\t\t\t{\n\t\t\t\t\tminutes = minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_MIXIN_TIME_MINUTES_SHORT');\n\n\t\t\t\t\treturn hours + ' ' + minutes;\n\t\t\t\t}\n\n\t\t\t\treturn hours;\n\t\t\t}\n\n\t\t\treturn minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_MIXIN_TIME_MINUTES_SHORT');\n\t\t},\n\t\tcalculateEntryTime(entry)\n\t\t{\n\t\t\tconst time = entry.time\n\t\t\t\t.map(interval => {\n\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t\t})\n\t\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\t\treturn Math.round(time / 1000);\n\t\t},\n\t\tgetEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\treturn this.monitor.entity.find(entity => entity.privateCode === privateCode);\n\t\t}\n\t}\n};"],"names":["Time","computed","fullTime","workTime","personalTime","$store","getters","reduce","sum","entry","time","methods","formatSeconds","seconds","$Bitrix","Loc","getMessage","hours","Math","floor","minutes","round","calculateEntryTime","map","interval","finish","Date","start","getEntityByPrivateCode","privateCode","monitor","entity","find"],"mappings":";;;;;KAAaA,IAAI,GAAG;CACnBC,EAAAA,QAAQ,EACR;CACCC,IAAAA,QADD,sBAEC;CACC,aAAO,KAAKC,QAAL,GAAgB,KAAKC,YAA5B;CACA,KAJF;CAKCD,IAAAA,QALD,sBAMC;CACC,aAAO,KAAKE,MAAL,CAAYC,OAAZ,CAAoB,4BAApB,EAAkDC,MAAlD,CAAyD,UAACC,GAAD,EAAMC,KAAN;CAAA,eAAgBD,GAAG,GAAGC,KAAK,CAACC,IAA5B;CAAA,OAAzD,EAA2F,CAA3F,CAAP;CACA,KARF;CASCN,IAAAA,YATD,0BAUC;CACC,aAAO,KAAKC,MAAL,CAAYC,OAAZ,CAAoB,6BAApB,EAAmDC,MAAnD,CAA0D,UAACC,GAAD,EAAMC,KAAN;CAAA,eAAgBD,GAAG,GAAGC,KAAK,CAACC,IAA5B;CAAA,OAA1D,EAA4F,CAA5F,CAAP;CACA;CAZF,GAFmB;CAgBnBC,EAAAA,OAAO,EACP;CACCC,IAAAA,aADD,yBACeC,OADf,EAEC;CACC,UAAIA,OAAO,GAAG,CAAd,EACA;CACC,eAAO,IAAI,GAAJ,GAAU,KAAKC,OAAL,CAAaC,GAAb,CAAiBC,UAAjB,CAA4B,kCAA5B,CAAjB;CACA,OAHD,MAIK,IAAIH,OAAO,GAAG,EAAd,EACL;CACC,eAAO,KAAKC,OAAL,CAAaC,GAAb,CAAiBC,UAAjB,CAA4B,qCAA5B,CAAP;CACA;;CAED,UAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWN,OAAO,GAAG,IAArB,CAAZ;CACA,UAAIO,OAAO,GAAGF,IAAI,CAACG,KAAL,CAAWR,OAAO,GAAG,EAAV,GAAe,EAA1B,CAAd;;CAEA,UAAIO,OAAO,KAAK,EAAhB,EACA;CACCH,QAAAA,KAAK,IAAI,CAAT;CACAG,QAAAA,OAAO,GAAG,CAAV;CACA;;CAED,UAAIH,KAAK,GAAG,CAAZ,EACA;CACCA,QAAAA,KAAK,GAAGA,KAAK,GAAG,GAAR,GAAe,KAAKH,OAAL,CAAaC,GAAb,CAAiBC,UAAjB,CAA4B,+BAA5B,CAAvB;;CAEA,YAAII,OAAO,GAAG,CAAd,EACA;CACCA,UAAAA,OAAO,GAAGA,OAAO,GAAG,GAAV,GAAgB,KAAKN,OAAL,CAAaC,GAAb,CAAiBC,UAAjB,CAA4B,kCAA5B,CAA1B;CAEA,iBAAOC,KAAK,GAAG,GAAR,GAAcG,OAArB;CACA;;CAED,eAAOH,KAAP;CACA;;CAED,aAAOG,OAAO,GAAG,GAAV,GAAgB,KAAKN,OAAL,CAAaC,GAAb,CAAiBC,UAAjB,CAA4B,kCAA5B,CAAvB;CACA,KApCF;CAqCCM,IAAAA,kBArCD,8BAqCoBb,KArCpB,EAsCC;CACC,UAAMC,IAAI,GAAGD,KAAK,CAACC,IAAN,CACXa,GADW,CACP,UAAAC,QAAQ,EAAI;CAChB,YAAMC,MAAM,GAAGD,QAAQ,CAACC,MAAT,GAAkB,IAAIC,IAAJ,CAASF,QAAQ,CAACC,MAAlB,CAAlB,GAA8C,IAAIC,IAAJ,EAA7D;CAEA,eAAOD,MAAM,GAAG,IAAIC,IAAJ,CAASF,QAAQ,CAACG,KAAlB,CAAhB;CACA,OALW,EAMXpB,MANW,CAMJ,UAACC,GAAD,EAAMgB,QAAN;CAAA,eAAmBhB,GAAG,GAAGgB,QAAzB;CAAA,OANI,EAM+B,CAN/B,CAAb;CAQA,aAAON,IAAI,CAACG,KAAL,CAAWX,IAAI,GAAG,IAAlB,CAAP;CACA,KAhDF;CAiDCkB,IAAAA,sBAjDD,kCAiDwBC,WAjDxB,EAkDC;CACC,aAAO,KAAKC,OAAL,CAAaC,MAAb,CAAoBC,IAApB,CAAyB,UAAAD,MAAM;CAAA,eAAIA,MAAM,CAACF,WAAP,KAAuBA,WAA3B;CAAA,OAA/B,CAAP;CACA;CApDF;CAjBmB,CAAb;;;;;;;;"}